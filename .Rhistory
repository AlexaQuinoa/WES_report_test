library(leaflet)
library(terra)
library(rgdal)
library(sf)
library(magrittr)
library(dplyr)
library(ggmap)
library(htmltools)
scotwind <- readOGR("r/WES_report_test/scotwind_<100m_>20kW_protected.shp")
scotwind <- readOGR("scotwind_<100m_>20kW_protected.shp")
scotwind <- readOGR("50kmPorts_wave<100m_>20kW:m_protected.gpkg")
map <- leaflet() %>%
addProviderTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 4)
map <- leaflet() %>%
addProviderTiles(providers$Esri.OceanBasemap)
50kmPorts <- readOGR("50kmPorts_wave<100m_>20kW:m_protected.gpkg")
50km_ports <- readOGR("50kmPorts_wave<100m_>20kW:m_protected.gpkg")
50kmports <- readOGR("50kmPorts_wave<100m_>20kW:m_protected.gpkg")
Fiftykm_ports <- readOGR("50kmPorts_wave<100m_>20kW:m_protected.gpkg")
rm(scotwind)
map <- leaflet() %>%
addProviderTiles(providers$Esri.OceanBasemap)
map <- leaflet() %>%
addProviderTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 4)
map
map <- leaflet() %>%
addProviderTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5)
map
map <- leaflet() %>%
addProviderTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addPolygons(data = Fiftykm_ports)
map
View(Fiftykm_ports)
View(Fiftykm_ports)
View(Fiftykm_ports)
install.packages("RSQLite")
library(RSQLite)
ogrListLayers("D50kmPorts_wave<100m_>20kW:m_protected.gpkg")
ogrListLayers("50kmPorts_wave<100m_>20kW:m_protected.gpkg")
Ports_50km <- readOGR("50kmPorts_wave<100m_>20kW:m_protected.gpkg")
Fiftykm_ports@polygons
rm(Fiftykm_ports)
ogrListLayers("50kmPorts_wave<100m_>20kW:m_protected.gpkg")
ports_50km <- src_sqlite ("50kmPorts_wave<100m_>20kW:m_protected.gpkg")
tbldata <- tbl(ports_50km, "50kmPorts_wave<100m_>20kW/m_protected")
View(ports_50km)
rm(Ports_50km)
tbldf <- as.data.frame(tbldata)
View(tbldf)
L.geoJSON(ports_50km_test.geojson).addTo(map)
L.geoJSON("ports_50km_test.geojson").addTo(map)
L.geoJSON("ports_50km_test.geojson") addTo(map)
L.geoJSON("ports_50km_test.geojson") %>%
addTo(map)
? L.geoJSON()
addGeoJSON(map = map, geojson = "ports_50km_test.geojson")
addGeoJSON(map = map, geojson = "ports_50km_test.geojson",
layerId = NULL,
stroke = TRUE,
color = "red",
weight = 5,
opacity = 0.5,
fill = TRUE,
fillColor = color,
fillOpacity - 0.2)
addGeoJSON(map = map, geojson = "ports_50km_test.geojson",
layerId = NULL,
stroke = TRUE,
color = "red",
weight = 5,
opacity = 0.5,
fill = TRUE,
fillColor = "red",
fillOpacity - 0.2)
addGeoJSON(map = map, geojson = "ports_50km_test.geojson",
layerId = NULL,
stroke = TRUE,
color = "red",
weight = 5,
opacity = 0.5,
fill = TRUE,
fillColor = "red",
)
var geojsonLayer = new L.GeoJSON.AJAX("ports_50km_test.geojson")
var geojsonLayer = new L.GeoJSON("ports_50km_test.geojson")
L.geoJSON("ports_50km_test.geojson")
addGeoJSON(map = map, geojson = "ports_50km_test.geojson",
layerId = NULL,
stroke = TRUE,
color = "red",
weight = 5,
opacity = 0.5,
fill = TRUE,
fillColor = "red",
)
addGeoJSON(map = map, geojson = "ports_50km_test.geojson",
layerId = NULL,
stroke = TRUE,
color = "red",
weight = 5,
opacity = 0.5,
fill = TRUE,
fillColor = "red",
)
map <- leaflet() %>%
addProviderTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addPolygons(data = "ports_50km_test.geojson")
map <- leaflet() %>%
addProviderTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addGeoJSON(map = map, geojson = "ports_50km_test.geojson",
layerId = NULL,
stroke = TRUE,
color = "red",
weight = 5,
opacity = 0.5,
fill = TRUE,
fillColor = "red",
)
map
L.geoJSON("Ports_100km_test.geojson")
map <- leaflet() %>%
addProviderTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addGeoJSON(map = map, geojson = "Ports_100km_test.geojson",
layerId = NULL,
stroke = TRUE,
color = "red",
weight = 5,
opacity = 0.5,
fill = TRUE,
fillColor = "red",
)
map
addGeoJSON(geojson = "Ports_100km_test.geojson",
layerId = NULL,
stroke = TRUE,
color = "red",
weight = 5,
opacity = 0.5,
fill = TRUE,
fillColor = "red",
)
map <- leaflet() %>%
addProviderTiles(providers$Esri.WorldTerrain) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addGeoJSON(map = map, geojson = "Ports_100km_test.geojson",
layerId = NULL,
stroke = TRUE,
color = "red",
weight = 5,
opacity = 0.5,
fill = TRUE,
fillColor = "red",
)
map
ogrlistlayers("Ports_100km_test.geojson")
addGeoJSON(map = map, geojson = "ports_50km_test.geojson",
layerId = NULL,
stroke = TRUE,
color = "red",
weight = 5,
opacity = 0.5,
fill = TRUE,
fillColor = "red",
)
plot("ports_50km_test.geojson")
map <- leaflet() %>%
addProviderTiles(providers$Esri.WorldStreetMap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addGeoJSON(map = map, geojson = "Ports_100km_test.geojson",
layerId = NULL,
stroke = TRUE,
color = "red",
weight = 5,
opacity = 0.5,
fill = TRUE,
fillColor = "red",
)
map
map <- leaflet() %>%
addProviderTiles(providers$Stamen.Toner) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addGeoJSON(map = map, geojson = "Ports_100km_test.geojson",
layerId = NULL,
stroke = TRUE,
color = "red",
weight = 5,
opacity = 0.5,
fill = TRUE,
fillColor = "red",
)
L.geoJSON("Ports_100km_test.geojson")
map <- leaflet() %>%
addProviderTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addGeoJSON(map = map, geojson = "Ports_100km_test.geojson",
layerId = NULL,
stroke = TRUE,
color = "red",
weight = 5,
opacity = 0.5,
fill = TRUE,
fillColor = "red",
)
map
map <- leaflet() %>%
addProviderTiles(providers$Stamen.Toner) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addGeoJSON(map = map, geojson = "Ports_100km_test.geojson",
layerId = NULL,
stroke = TRUE,
color = "red",
weight = 5,
opacity = 0.5,
fill = TRUE,
fillColor = "red",
)
map
library(leaflet)
library(terra)
library(rgdal)
library(sf)
library(magrittr)
library(dplyr)
library(ggmap)
library(htmltools)
library(RSQLite)
map <- leaflet() %>%
addProviderTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addGeoJSON(map = map, geojson = "Ports_100km_test.geojson",
layerId = NULL,
stroke = TRUE,
color = "red",
weight = 5,
opacity = 0.5,
fill = TRUE,
fillColor = "red",
)
map
addGeoJSON(map = map, geojson = "Ports_100km_test.geojson",
layerId = NULL,
stroke = TRUE,
color = "red",
weight = 5,
opacity = 0.5,
fill = TRUE,
fillColor = "red",
)
map <- leaflet() %>%
addProviderTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addPolygons(data = "ports_50km_test.geojson")
map <- leaflet() %>%
addProviderTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addGeoJSON(map = map, geojson = "Ports_100km_test.geojson",
layerId = NULL,
stroke = TRUE,
color = "red",
weight = 5,
opacity = 0.5,
fill = TRUE,
fillColor = "red",
)
map
addGeoJSON(map = map, geojson = "~/r/WES-report_test/Ports_100km_test.geojson",
layerId = NULL,
stroke = TRUE,
color = "red",
weight = 5,
opacity = 0.5,
fill = TRUE,
fillColor = "red",
)
? addGeoJSON()
library(leaflet.providers)
map <- leaflet() %>%
addProviderTiles(providers$Stamen.Toner) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addGeoJSON(map = map, geojson = "Ports_100km_test.geojson",
layerId = NULL,
stroke = TRUE,
color = "red",
weight = 5,
opacity = 0.5,
fill = TRUE,
fillColor = "red",
)
map
map <- leaflet() %>%
addProviderTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5)
map
map <- leaflet() %>%
addTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addGeoJSON(map = map, geojson = "Ports_100km_test.geojson",
layerId = NULL,
stroke = TRUE,
color = "red",
weight = 5,
opacity = 0.5,
fill = TRUE,
fillColor = "red",
)
map
ports_100km <- readOGR(dsn = "Ports_100km_test.geojson", layer = "OGRGeoJSON")
ports_100km <- readOGR("Ports_100km_test.geojson")
map <- leaflet() %>%
addTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addGeoJSON(map = map, geojson = "Ports_100km_test.geojson",
layerId = NULL,
stroke = TRUE,
color = "red",
weight = 5,
opacity = 0.5,
fill = TRUE,
fillColor = "red",
)
map
View(ports_100km)
map <- leaflet() %>%
addProviderTiles(providers$Stamen.Toner) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addGeoJSON(map = map, geojson = "Ports_100km_test.geojson"
)
map
map <- leaflet() %>%
addTiles() %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addGeoJSON(map = map, geojson = "Ports_100km_test.geojson"
)
map
map <- leaflet() %>%
addTiles() %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addGeoJSON(map = map, geojson = "Ports_100km_test.geojson"
)
map
map <- leaflet() %>%
addTiles()
map
map <- leaflet() %>%
addTiles() %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addGeoJSON(map = map, geojson = "Ports_100km_test.geojson"
)
map
library(sf)
data_test <- readsf("zss/scotwind_<100m_>20kW_protected.shp")
data_test <- read_sf("zss/scotwind_<100m_>20kW_protected.shp")
st_drivers()
data_test <- read_sf("Ports_100km_test.geojson")
data_test <- st_transform(data_test, crs = '+proj=longlat +datum=WGS84')
map <- leaflet() %>%
addTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addPolygons(data = data_test. color = "blue", stroke = 1, opacity = 0.8
map <- leaflet() %>%
addTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addPolygons(data = data_test. colors = "blue", stroke = 1, opacity = 0.8
? addPolygons()
map <- leaflet() %>%
addTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addPolygons(data = data_test. color = "ffffff", stroke = 1, opacity = 0.8
map <- leaflet() %>%
addTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addPolygons(data = data_test, color = "blue", stroke = 1, opacity = 0.8
)
map
map <- leaflet() %>%
addTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addPolygons(data = data_test, color = "blue", stroke = 1, opacity = 0.8
)
map
map <- leaflet() %>%
addTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addPolygons(data = data_test, color = "blue", stroke = 0.5, opacity = 0.5
)
map
map <- leaflet() %>%
addProviderTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5)
map
map <- leaflet() %>%
addTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addPolygons(data = data_test, color = "blue", stroke = 0.5, opacity = 0.5
)
map
map <- leaflet() map %>%
data_test2 <- read_sf("100kmPorts_wave<100m_>20kW/m_protected.gpkg")
data_test2 <- read_sf("zss/100kmPorts_wave<100m_>20kW/m_protected.gpkg")
data_test2 <- read_sf("zss/100kmPorts_wave<100m_>20kW:m_protected.gpkg")
map <- leaflet() map %>%
map <- leaflet() %>%
addProviderTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addPolygons(data = data_test, color = "blue", stroke = 0.5, opacity = 0.5
)
map
map <- leaflet() %>%
addProviderTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addPolygons(data = data_test, color = "blue", stroke = 0.1, opacity = 0.5
)
map
map <- leaflet() %>%
addProviderTiles(providers$Esri.OceanBasemap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addPolygons(data = data_test, color = "blue", stroke = 10, opacity = 0.5
)
map
map <- leaflet() %>%
addProviderTiles(providers$Esri.WorldTopoMap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addPolygons(data = data_test, color = "blue", stroke = 10, opacity = 0.5
)
map
library(mapview)
install.packages("mapview")
library(mapview)
mapshot(map, file - "static_map.png")
mapshot(map, file = "static_map.png")
install_phantomjs()
webshot::install_phantomjs()
mapshot(map, file = "static_map.png")
library(htmlwidgets)
saveWidget(map, file = "dynamic_map.html")
htmlwidgets:::pandoc_available(); htmlwidgets:::.pandoc$version
install.packages("pandoc")
library(pandoc)
saveWidget(map, file = "dynamic_map.html")
# Library ----
library(leaflet)
library(terra)
library(rgdal)
library(sf)
library(magrittr)
library(dplyr)
library(ggmap)
library(htmltools)
library(RSQLite)
library(leaflet.providers)
library(mapview)
library(htmlwidgets)
library(pandoc)
# Load ----
data_test <- read_sf("Ports_100km_test.geojson")
# Set projection ----
data_test <- st_transform(data_test, crs = '+proj=longlat +datum=WGS84')
# data_test2 <- read_sf("zss/100kmPorts_wave<100m_>20kW:m_protected.gpkg")
# data_test2 <- st_transform(data_test2, crs = '+proj=longlat +datum=WGS84')
# Load map ----
map <- leaflet() %>%
addProviderTiles(providers$Esri.WorldTopoMap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5)
map
# Add polygons
map <- leaflet() %>%
addProviderTiles(providers$Esri.WorldTopoMap) %>%
setView(lng = -4.2026458, lat = 56.4906712, zoom = 5) %>%
addPolygons(data = data_test, color = "blue", stroke = 10, opacity = 0.5
)
map
# mapshot(map, file = "static_map.png")
saveWidget(map, file = "dynamic_map.html")
